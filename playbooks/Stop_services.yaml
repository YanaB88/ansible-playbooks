---
- name: Stops Services
  hosts: all  #DB
  become: true
  become_method: sudo
  user: centos
  ignore_errors: true #Don't stop if there are errors
  tasks:
  - name: Stop r1soft on CentOS7
    when: (ansible_distribution == "CentOs" and ansible_distribution_major_version == "7")
    systemd:
      name: sdm-agent
      state: stopped
    ignore_errors: true


  - name: Stop r1soft on CEntOS 6
    when: (ansible_distribution == "CentOs" and ansible_distribution_major_version == "6")
    systemd:
      name: cdp-agent
      state: stopped
    ignore_errors: true


  - name: Stop Filebeat
      when: (ansible_distribution == "CentOs" and ansible_distribution_major_version == "7")
    systemd:
      name: filebeat
      state: stopped
    ignore_errors: true


  - name: Stop NRP
      when: (ansible_distribution == "CentOs" and ansible_distribution_major_version == "7")
    systemd:
      name: nrpe
      state: stopped
    ignore_errors: true

  - name: Stop MariaDB
      when: (ansible_distribution == "CentOs" and ansible_distribution_major_version == "7")
    systemd:
      name: mariadb
      state: stopped
    ignore_errors: true


  